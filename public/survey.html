<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
     <title>Survey</title>
     <link rel="icon" href="https://www.freeiconspng.com/uploads/-thug-life-sunglasses-pixel-druck-dir-die-thug-life-178-x-178-png-0kb-8.png">
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    </head>
   <!-- <img src="https://www.freeiconspng.com/uploads/-thug-life-sunglasses-pixel-druck-dir-die-thug-life-178-x-178-png-0kb-8.png" width="350" alt=" thug life sunglasses pixel druck dir die thug life 178 x 178 png 0kb" /></a> -->
 
   <body>
 
     <div class = "container">
       
 
       <!-- Quiz Page Title -->
       <div class="page-header">
         <h1 style="font-size: 45px;"><span class="glyphicon glyphicon-glass" style="color: blue;"></span> Friend Finder Survey<span class="glyphicon glyphicon-glass" style="color: blue;"></span></h1>
       </div>
 
 
       <!-- User Name and Photo Panel -->
       <div class="panel panel-default">
         <div class="panel-heading">
           <h3 class="panel-title"><strong>About You</strong></h3>
         </div>
         <div class="panel-body">
           <h4>Your Name: </h4>
           <div class="input-group">
             <input id = "formName" class="form-control" type="text" name="name" placeholder="Name">
             <span class="input-group-addon">(Required)</span>
           </div>  
           <br>
           <h4>Profile Image: </h4>
           <div class="input-group">
             <input id = "formImage" class="form-control" type="text" name="image" placeholder="Photo Image URL">
             <span class="input-group-addon">(Required)</span>
           </div>
         </div>
       </div>
 
 
       <!-- Quiz Page Questions Panel -->
       <div class="panel panel-default">
         <div class="panel-heading">
           <h3 class="panel-title"><strong>Questionnaire</strong></h3>
         </div>
         <div class="panel-body">
           
           <!-- Q1 -->
           <h4><strong>1. Is there such a thing as ESP?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q2 -->
           <h4><strong>2. Why do we dream?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q3 -->
           <h4><strong>3. How can we motivate ourselves more effectively through reinforcement?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q4 -->
           <h4><strong>4.  How can we get our working memory to work for us?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q5 -->
           <h4><strong>5. What’s the key to solving life’s problems?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q6 -->
           <h4><strong>6.  How can we communicate more effectively?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q7 -->
           <h4><strong>7.  What is intelligence (and why should we care)?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q8 -->
           <h4><strong>8.  What does it mean to be self-actualized?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q9 -->
           <h4><strong>9.  How does the mind-body connection affect our emotions?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
           <!-- Q10 -->
           <h4><strong>10.  Which is more important, nature or nurture?</strong></h4>
           <div class="input-group">
            <input id = "formName" class="form-control input-lg" type="text" name="questionnaire" placeholder="Write Something!">
            <!-- <span class="input-group-addon"></span> -->
          </div>
 
         </div>
       </div>
 
 
       <!-- Quiz Submit Button -->
       <button id="submitButton" type="submit" class="btn btn-md btn-success btn-block"><h4><span class="glyphicon glyphicon-send"></span> Find Closest Match</h4></button> 
   
       <br>
 
       <!-- Webpage Footer -->
       <footer class="footer">
         <p><a href="/api/friends">Friends List</a> | | <a href="https://github.com/josephedward" target="_blank">GitHub</a> | <a href="/">Home</a></p>
       </footer> 
 
 
       <!-- Match Modal -->
       <div id="resultsModal" class="modal fade" role="dialog">
         <div class="modal-dialog">
 
           <!-- Modal Content-->
           <div class="modal-content">
 
             <!-- "X" Button to close the modal -->
             <div class="modal-header">
               <button type="button" class="close" data-dismiss="modal">&times;</button>
               <h2 class="modal-title"><strong>Meet Your New Friend!</strong></h2>
             </div>
 
             <!-- Modal Body (For Match Info) -->
             <div class="modal-body">
               <h2 id="matchName"></h2>
               <img id="matchImg" src="" alt="Image Not Found" style="max-width: 350px;">
             </div>
 
             <!-- Modal Footer (Close Button) -->
             <div class="modal-footer">
               <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
             </div>
 
           </div>
 
         </div>
       </div>
 
 
     </div>
 <style>
 
 #formName{
   width: 100% !important;
 }

 .input-group,.form-control{
  width: 100% !important;
 }
 
 </style>
 
     <!-- Link in jQuery -->
     <script src="https://code.jquery.com/jquery.js"></script>
     <!-- Latest compiled and minified JavaScript (USED FOR THE MODAL) -->
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 
 
     <!-- JavaScript for Submission Logic -->
     <script>
       //CANT CALL CLIENT SIDE NPM!!!
//        var Sentiment = require('sentiment');
// var sentiment = new Sentiment();

       // Global Variable Declaration (scoping fix)
       var allFieldsCompleted;

       $(document).ready(function() {
      $("#submitButton").on('click', function(event) {
        var textArr=[];
        $(".form-control").each(function(){
          var tempString=$(this).val().trim();
          if (tempString === undefined) {tempString = "strawberry";}
          textArr.push(tempString);
        })
        var name= textArr[0]
        var imageURL=textArr[1];
        textArr=textArr.slice(2);

        
        console.log(textArr);
        
        var newFriend={
          name:name,
          image:imageURL,
          textArr:textArr
        }

        $.ajax({
          method: 'POST',
          url: '/api/friends',
          data: newFriend
        }).then(function(data) {
          console.log(data);
          alert('Adding friend...');

           // Grab the result from the AJAX post so that the best match's name and photo are displayed.
           $("#matchName").text(data.name);
                    $('#matchImg').attr("src", data.photo);
                    // Show the modal with the best match 
                    $("#resultsModal").modal('toggle');
        });
        
        //empties fields after submission
        $(".form-control").each(function(){
          $(this).val("");
        })        



      });
    });



 // Form validation
 function validateForm() {
                var isValid = true;
                $('.form-control').each(function() {
                    if ($(this).val() === '')
                        isValid = false;
                });
                // $('.chosen-select').each(function() {
                //     if ($(this).val() === "")
                //         isValid = false
                // })
                return isValid;
            }


     </script>
 
   </body>
 
 </html>


<!-- //***************************************************************************************************************** 
//  // Event Listener for Submission
//  $('#submitButton').on('click', function() {
   
//    // Check if all the user fields are completed
//    checkIfComplete(function(){
//      // Proceed with AJAX call if all questions are answered
//      if(allFieldsCompleted){
//        collectInputs();
//      }
//      else{
//        alert('Please complete all fields before submitting!');
//      }
//    }); // end checkIfComplete() callback
//  }); // end submit listener
// }); // document ready
// // Function to valid user input
// function checkIfComplete(callback){
//  // Check through all the questions (i.e. iterate through all of class "chosen-select")
//  var questionsCompleted;
//  $('.chosen-select').each(function(){
//    if ( $(this).val() == "" ){
//      questionsCompleted = false;
//    }
//  })
//  // This counters the async behavior of $.each()
//  .promise().done(function(){


  
//    // Check if any questions are incomplete
//    if(questionsCompleted == false){
//      allFieldsCompleted = false;
//    }
//    // Determine if Name is entered
//    else if( $('#formName').val().trim() == "" ){
//      allFieldsCompleted = false;
//    }
//    // Determine if Link is entered
//    else if( $('#formImage').val().trim() == "" ){
//      allFieldsCompleted = false;
//    }
//    // Otherwise, the all fields are completed
//    else{
//      allFieldsCompleted = true;
//    }
//    // Fire Off Callback (to counter async behavior of $.each)
//    callback();       
//  });
// }
// function collectInputs(){
//  // Make new friend object
//  var newFriend = {
//    name: $('#formName').val().trim(),
//    photo: $('#formImage').val().trim(),
//    scores: []
//  };
//  // Loop through Questions to get scores
//  var scoresArray = [];
//  $('.chosen-select').each(function(){
//    scoresArray.push( parseInt( $(this).val() ) ); // Parse Input Value as integer
//  })
//   // This counters the async behavior of $.each()
//  .promise().done(function(){
   
//    // Push the array of scores to the new friend object
//    newFriend.scores = scoresArray;
//    // POST the newFriend to the friends.js file and get back the best match
//    var currentURL = window.location.origin;
//    $.post(currentURL + "/api/friends", newFriend, function(data){
//      // Add Best Match attributes to Modal
//      $('#matchName').text(data.name);
//      $('#matchImg').attr('src', data.photo);
//      // Show the modal with the best match 
//      $("#resultsModal").modal('toggle');
//    }); // end AJAX POST
//  });  -->